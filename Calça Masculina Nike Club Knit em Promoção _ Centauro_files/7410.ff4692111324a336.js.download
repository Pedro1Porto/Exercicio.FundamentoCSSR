!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="41db6543-0f55-4e23-8ad7-429448e05768",e._sentryDebugIdIdentifier="sentry-dbid-41db6543-0f55-4e23-8ad7-429448e05768")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7410],{97089:function(e,t,n){n.d(t,{t:function(){return i}});var r=n(2986);let i=e=>{let{component:t,store:n,product:i}=e;return{event:"select_route_to_store",component:t,store:n,ecommerce:(0,r.w)(i)}}},48870:function(e,t,n){n.d(t,{l:function(){return l}});var r=n(3255),i=n(52495);let o=e=>e?"/v1/store/latlong/".concat(e):null,a=e=>i.hi.get(e).then(e=>e.data),l=e=>{let{storeId:t,shouldFetch:n=!0}=e,i=n?o(t):null;return(0,r.ZP)(i,a,{revalidateOnFocus:!1,revalidateIfStale:!1})}},62318:function(e,t,n){n.d(t,{D$:function(){return u},DM:function(){return d},Fg:function(){return c},QP:function(){return h},W2:function(){return a},f$:function(){return l},gf:function(){return p},li:function(){return m},qo:function(){return g},tp:function(){return f},ub:function(){return s}});var r=n(35505),i=n(72452),o=n(79235);let a=r.default.div.withConfig({displayName:"TraceRoute.styled__Container",componentId:"sc-dcae6db1-0"})(["",""],e=>{let{theme:t}=e;return(0,r.css)(["display:flex;align-items:center;gap:",";","{width:100%;}"],t.spacing[100],i.BC.lessThan("medium"))}),l=r.default.div.withConfig({displayName:"TraceRoute.styled__ItemWrapper",componentId:"sc-dcae6db1-1"})(["",""],e=>{let{theme:t}=e;return(0,r.css)(["display:flex;align-items:center;gap:",";justify-content:space-between;max-width:100%;overflow:hidden;width:100%;"],t.spacing[200])}),d=r.default.div.withConfig({displayName:"TraceRoute.styled__AddressTextContainer",componentId:"sc-dcae6db1-2"})(["",""],e=>{let{theme:t}=e;return(0,r.css)(["display:flex;align-items:center;color:",";gap:",";overflow:hidden;white-space:nowrap;flex:1;svg{width:14px;height:14px;z-index:2;flex-shrink:0;}"],t.color.brand.primary,t.spacing[50])}),s=(0,r.default)(o.Z).withConfig({displayName:"TraceRoute.styled__LabelWrapper",componentId:"sc-dcae6db1-3"})(["display:flex;flex:1;min-width:0;align-items:center;"]),c=r.default.a.withConfig({displayName:"TraceRoute.styled__StyledLink",componentId:"sc-dcae6db1-4"})(["",""],e=>{let{theme:t}=e;return(0,r.css)(["color:",";font-size:",";text-decoration:none;z-index:2;"],t.color.brand.primary,t.fontSize.xtiny)}),u=(0,r.default)(o.Z).withConfig({displayName:"TraceRoute.styled__UnderlinedSpan",componentId:"sc-dcae6db1-5"})(["",""],e=>{let{theme:t,sizeNormal:n}=e;return(0,r.css)(["font-size:",";text-decoration:underline;"],n?t.fontSize.mini:t.fontSize.xtiny)}),f=r.default.span.withConfig({displayName:"TraceRoute.styled__DistanceWrapper",componentId:"sc-dcae6db1-6"})(["",""],e=>{let{theme:t}=e;return(0,r.css)(["flex-shrink:0;white-space:nowrap;margin-right:",";"],t.spacing[50])}),p=r.default.span.withConfig({displayName:"TraceRoute.styled__Comma",componentId:"sc-dcae6db1-7"})(["",""],e=>{let{theme:t}=e;return(0,r.css)(["margin-right:",";"],t.spacing[50])}),m=r.default.span.withConfig({displayName:"TraceRoute.styled__TruncatedLabel",componentId:"sc-dcae6db1-8"})(["display:block;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;min-width:0;position:relative;z-index:2;pointer-events:auto;"]),g=r.default.span.withConfig({displayName:"TraceRoute.styled__MoreBadge",componentId:"sc-dcae6db1-9"})(["",""],e=>{let{theme:t,addLeftMargin:n}=e;return(0,r.css)(["display:inline-flex;align-items:center;justify-content:center;font-weight:",";min-width:18px;height:18px;padding:","",";font-size:",";border-radius:",";background:",";color:",";flex-shrink:0;z-index:2;",""],t.fontWeight.medium,t.spacing[0],t.spacing[50],t.fontSize.mini,t.borderRadius.medium,t.color.brand.primary,t.color.neutral[100],n&&"margin-left: ".concat(t.spacing[50],";"))}),h=r.default.div.withConfig({displayName:"TraceRoute.styled__LinkAndBadgeWrapper",componentId:"sc-dcae6db1-10"})(["",""],e=>{let{theme:t}=e;return(0,r.css)(["display:flex;align-items:center;gap:",";flex-shrink:0;"],t.spacing[50])})},57410:function(e,t,n){n.d(t,{k:function(){return N}});var r=n(52322),i=n(2784),o=n(2321),a=n(62318),l=n(62887),d=n(97377),s=n(48870),c=n(97089),u=n(68554),f=n(94145),p=n(83034),m=n(88559),g=n(18965),h=n(8871),x=n(75073),w=n(2986);let y=e=>{let{component:t,allStores:n,storesCount:r,product:i}=e;return{event:"select_available_stores_tag",component:t,allStores:n,storesCount:r,ecommerce:(0,w.w)(i)}};var b=n(35513),v=n(35505),_=n(72452);let C=(0,v.default)(h.Ce).withConfig({displayName:"DistanceAndBadge.styled__Arrow",componentId:"sc-5fd69d0b-0"})(["",""],e=>{let{theme:t}=e;return(0,v.css)(["fill:",";stroke:",";"],t.color.neutral[100],t.color.neutral[300])}),j=(0,v.default)(h._v).withConfig({displayName:"DistanceAndBadge.styled__Content",componentId:"sc-5fd69d0b-1"})(["",""],e=>{let{theme:t}=e;return(0,v.css)(["border:"," solid ",";border-radius:",";background-color:",";padding:"," "," ",";z-index:10;max-width:400px;height:auto;","{max-width:320px;height:auto;}"],t.borderWidth.xthin,t.color.neutral[300],t.borderRadius.large,t.color.neutral[100],t.spacing[200],t.spacing[100],t.spacing[100],_.BC.lessThan("medium"))}),I=e=>{let{distance:t,extraCount:n=0,content:o,onShowMoreStore:l,component:d,allStores:s,storesCount:c,product:f}=e,{isMobile:p}=(0,x.$Y)(),{setBlockScreen:m}=(0,b.mM)(),{trackEvent:g}=(0,u.EF)(),[w,v]=(0,i.useState)(!1),_=!!t,I=n>0,k=!_&&I;if(!_&&!I)return null;let N=e=>{null==m||m(e),v(e),null==l||l()};return(0,r.jsxs)(r.Fragment,{children:[_&&(0,r.jsxs)(a.tp,{children:[" a ",t]}),I&&(0,r.jsx)(r.Fragment,{children:o?(0,r.jsx)(h.pn,{children:(0,r.jsxs)(h.fC,{onOpenChange:e=>{N(!!e),e&&d&&s&&c>0&&g(y,{component:d,allStores:s,storesCount:c,product:f})},delayDuration:100,open:w,children:[(0,r.jsx)(h.aJ,{asChild:!0,children:(0,r.jsxs)(a.qo,{role:"button","aria-label":"Mostrar mais ".concat(n," lojas"),addLeftMargin:k,onClick:e=>{e.preventDefault(),e.stopPropagation(),p&&w&&d&&s&&c>0&&g(y,{component:d,allStores:s,storesCount:c,product:f}),N(!w)},children:["+",n]})}),(0,r.jsx)(h.NM,{children:(0,r.jsxs)(j,{sideOffset:5,side:"bottom",children:[o,(0,r.jsx)(C,{})]})})]})}):(0,r.jsxs)(a.qo,{addLeftMargin:k,children:["+",n]})})]})},k=e=>{let{filter:t,isCard:n,product:o,extraCount:h=0,content:x,onShowMoreStore:w,component:y,allStores:b,storesCount:v}=e,[_,C]=(0,i.useState)(null),j=(0,m.hm)(t.label),{trackEvent:k}=(0,u.EF)(),{geonavPreference:N}=(0,p.gN)(),S=(0,i.useRef)(null),z=t.label.match(/\(Loja\s+(\d+)\)/i),M=(null==z?void 0:z[1])||"",{data:T}=(0,s.l)({storeId:M}),R=(0,f.i)(S,[j,T]),D=(0,i.useMemo)(()=>_&&T?(0,m.uG)(_,[{latitude:T.lat,longitude:T.long}])[0]:null,[_,T]),W=(0,i.useMemo)(()=>{if(!T)return"#";let e=null==N?void 0:N.zipCode,t=(0,m.KQ)(e,_);return(0,m.yz)({user:t,stores:[{latitude:T.lat,longitude:T.long}]})[0]},[_,null==N?void 0:N.zipCode,T]);return((0,i.useEffect)(()=>{(async()=>{C(await (0,m.vW)())})()},[]),T)?(0,r.jsxs)(a.f$,{"data-testid":"trace-route-item",children:[(0,r.jsxs)(a.DM,{children:[(0,r.jsx)(d.Z,{}),(0,r.jsxs)(a.ub,{size:"small",type:"simple",weight:"normal",children:[R?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.Z,{state:"neutral",content:j,placement:"top",children:(0,r.jsxs)(a.li,{ref:S,children:[j,(0,r.jsx)(m.vI,{shouldShow:!!D})]})})}):(0,r.jsxs)(a.li,{ref:S,children:[j,(0,r.jsx)(m.vI,{shouldShow:!!D})]}),(0,r.jsx)(I,{distance:D,extraCount:h,content:x,onShowMoreStore:w,component:y,allStores:b,storesCount:v,product:o})]})]}),(0,r.jsx)(g.w,{mapLink:W,onClick:()=>{k(c.t,{component:n?"item_card":"nearby_stores",store:{storeName:t.label,storeId:M},product:o})}})]}):null},N=(0,i.memo)(e=>{let{selectedStoreFilters:t,variant:n="default",product:i,onShowMoreStore:l,content:d,component:s,allStores:c,storesCount:u}=e,f=n===o.c7;if(!t||0===t.length)return null;let p=t[0],m=Math.max(0,t.length-1);return(0,r.jsx)(a.W2,{"data-testid":"trace-route",children:(0,r.jsx)(k,{filter:p,isCard:f,product:i,extraCount:m,content:d,onShowMoreStore:l,component:s,allStores:c,storesCount:u},p.label)})})},18965:function(e,t,n){n.d(t,{w:function(){return a}});var r=n(52322),i=n(2321),o=n(62318);let a=e=>{let{mapLink:t,onClick:n,sizeNormal:a=!1}=e;return(0,r.jsx)(o.QP,{children:(0,r.jsx)(o.Fg,{href:t,target:"_blank",rel:"noopener noreferrer",onClick:n,children:(0,r.jsx)(o.D$,{size:"small",type:"simple",weight:"intense",sizeNormal:a,children:i.vx})})})}},2321:function(e,t,n){n.d(t,{If:function(){return a},YA:function(){return l},c7:function(){return i},e8:function(){return o},vx:function(){return r}});let r="Tra\xe7ar rota",i="card",o="rp_geo_location",a=6371e3,l=", "},88559:function(e,t,n){n.d(t,{KQ:function(){return d},hm:function(){return u},uG:function(){return s},vI:function(){return f},vW:function(){return l},yz:function(){return c}});var r=n(52322),i=n(37340),o=n(2321),a=n(62318);let l=()=>new Promise(e=>{if(!(0,i.S_)())return e(null);let t=document.cookie.split("; ").find(e=>e.startsWith("".concat(o.e8,"=")));if(t){let n=t.split("=")[1];try{let t=JSON.parse(decodeURIComponent(n));if(t.latitude&&t.longitude)return e(t)}catch(e){console.error('Failed to parse geolocation cookie data. Value: "'.concat(n,'"'),e)}}"geolocation"in navigator?navigator.geolocation.getCurrentPosition(t=>{let{latitude:n,longitude:r}=t.coords,a={latitude:n,longitude:r};(0,i.BV)(void 0,o.e8,JSON.stringify(a)),e(a)},()=>e(null)):e(null)}),d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?{zipCode:e}:(null==t?void 0:t.latitude)&&(null==t?void 0:t.longitude)?{latitude:t.latitude,longitude:t.longitude}:null},s=(e,t)=>{let n=e=>e*Math.PI/180,r=o.If;return t.map(t=>{let i=n(e.latitude),o=n(t.latitude),a=Math.sin(n(t.latitude-e.latitude)/2)**2+Math.cos(i)*Math.cos(o)*Math.sin(n(t.longitude-e.longitude)/2)**2,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*r;return Number.isNaN(l)?null:l>=1e3?"".concat((l/1e3).toFixed(1)," km"):"".concat(Math.round(l)," metros")})},c=e=>{let{user:t,stores:n}=e;return n.map(e=>{let{latitude:n,longitude:r}=e;return(null==t?void 0:t.zipCode)?"https://www.google.com/maps/dir/".concat(t.zipCode,",BRASIL/").concat(n,",").concat(r):(null==t?void 0:t.latitude)&&(null==t?void 0:t.longitude)?"https://www.google.com/maps/dir/".concat(t.latitude,",").concat(t.longitude,"/").concat(n,",").concat(r):"https://www.google.com/maps/dir//".concat(n,",").concat(r)})},u=e=>e.replace(/\(Loja\s+[^)]+\)/g,"").replace(/^[^,]+,\s*/,"").replace(/\s*-\s*.+$/,"").trim(),f=e=>{let{shouldShow:t}=e;return t?(0,r.jsx)(a.gf,{"data-testid":"comma-separator",children:o.YA}):null}},94145:function(e,t,n){n.d(t,{i:function(){return i}});var r=n(2784);let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[n,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let t;let n=setTimeout(()=>{t=requestAnimationFrame(()=>{let t=e.current;t&&i(t.offsetWidth<t.scrollWidth)})},100);return()=>{clearTimeout(n),cancelAnimationFrame(t)}},t),n}}}]);